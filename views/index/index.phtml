<?php
/*=========================================================================
MIDAS Server
Copyright (c) Kitware SAS. 20 rue de la Villette. All rights reserved.
69328 Lyon, FRANCE.

See Copyright.txt for details.
This software is distributed WITHOUT ANY WARRANTY; without even
the implied warranty of MERCHANTABILITY or FITNESS FOR A PARTICULAR
PURPOSE.  See the above copyright notices for more information.
=========================================================================*/

if($this->slicerView)
  {
  // Get required jQuery
  echo '<script type="text/javascript" src="'.$this->coreWebroot.'/public/js/layout/jquery.js"></script>';
  echo '<script type="text/javascript" src="'.$this->coreWebroot.'/public/js/layout/jquery-ui.js"></script>';
  echo '<script type="text/javascript" src="'.$this->coreWebroot.'/public/js/layout/jquery.treeTable.js"></script>';
  echo '<script type="text/javascript" src="'.$this->coreWebroot.'/public/js/layout/jquery.qtip.min.js"></script>';
  echo '<script type="text/javascript" src="'.$this->moduleWebroot.'/public/js/index/index.index.js"></script>';
  echo '<script type="text/javascript" src="'.$this->webroot.'/modules/ratings/public/js/star_rating/jquery.ui.stars.min.js"></script>';
  }
else
  {
  $this->headScript()->appendFile($this->webroot.'/modules/ratings/public/js/star_rating/jquery.ui.stars.min.js');
  }
$this->headScript()->appendFile($this->moduleWebroot.'/public/js/index/index.index.js');
?>
<link type="text/css" rel="stylesheet" href="<?php echo $this->moduleWebroot?>/public/css/index/index.index.css" />
<link type="text/css" rel="stylesheet" href="<?php echo $this->coreWebroot?>/public/css/layout/jquery.qtip.min.css" />
<link type="text/css" rel="stylesheet" href="<?php echo $this->webroot?>/modules/ratings/public/css/star_rating/jquery.ui.stars.css" />

<?php
if($this->slicerView)
  {
  echo '<div class="viewWrapperSlicer">';
  }
else
  {
  echo '<div class="viewWrapperBrowser">';
  }
?>
  <div class="extensionsHeader">
    <div class="extensionsTitle">Slicer Extensions</div>
    <?php if(!$this->slicerView)
      { ?>
    <div class="extensionFilterArea">
      <select id="osSelect">
        <option value="win">Windows</option>
        <option value="linux">Linux</option>
        <option value="macosx">Mac OSX</option>
      </select>
      <select id="archSelect">
        <option value="i386">32-bit</option>
        <option value="amd64">64-bit</option>
      </select>
      <select id="releaseSelect">
        <?php
        foreach($this->availableReleases as $release)
          {
          echo '<option value="'.$release.'">'.$release.'</option>';
          }
        ?>
      </select>
    </div>
    <?php } ?>
  </div>
  <div class="extensionsBody">
    <div class="extensionsBodyLeftColumn">
      <div class="categoryList">
        <div class="categoriesHeader">Categories</div>
        <ul id="categoriesList" class="categoriesList">
          <li id="categoryAll">All</li>
        </ul>
      </div>
    </div>
    <div class="extensionsBodyRightColumn">
      <div class="extensionList">
        <div class="loadingExtensions">
          <img alt="" src="<?php echo $this->coreWebroot?>/public/images/icons/loading.gif" /> Loading extensions
        </div>
        <div id="extensionsContainer">
        </div>
      </div>
    </div>
  </div>
</div>

<!-- TEMPLATE: extension -->
<div class="extensionWrapper" style="display: none;" id="extensionTemplate">
  <div class="extensionIconWrapper">
    <img width="128px" height="128px" alt="" src="" class="extensionIcon" />
  </div>
  <div class="extensionNameWrapper">
    <a href="javascript:;" class="extensionName"></a>
  </div>
  <div class="subtitleWrapper">
    <span class="subtitle"></span>
  </div>
  <div class="extensionRatings">
    <form>
      <input type="radio" name="avgrate" value="1"/>
      <input type="radio" name="avgrate" value="2"/>
      <input type="radio" name="avgrate" value="3"/>
      <input type="radio" name="avgrate" value="4"/>
      <input type="radio" name="avgrate" value="5"/>
      <input type="radio" name="avgrate" value="6"/>
      <input type="radio" name="avgrate" value="7"/>
      <input type="radio" name="avgrate" value="8"/>
      <input type="radio" name="avgrate" value="9"/>
      <input type="radio" name="avgrate" value="10"/>
    </form>
    <span class="totalVotes"></span>
  </div>
  <div class="downloadButtonWrapper">
    <input type="button" class="downloadButton" />
  </div>
</div>

<!-- Pass json to our javascript -->
<div style="display: none;" id="jsonContent">
  <?php echo json_encode(array('webroot' => $this->webroot,
                         'coreWebroot' => $this->coreWebroot,
                         'moduleWebroot' => $this->moduleWebroot,
                         'slicerView' => $this->slicerView,
                         'categories' => $this->allCategories,
                         'os' => $this->os,
                         'arch' => $this->arch,
                         'release' => $this->release,
                         'revision' => $this->revision));
  ?>
</div>
